(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4a4f780"],{"04cb":function(e,t,n){},"1dde":function(e,t,n){var o=n("d039"),a=n("b622"),r=n("2d00"),i=a("species");e.exports=function(e){return r>=51||!o((function(){var t=[],n=t.constructor={};return n[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,n){var o=n("861d"),a=n("e8b5"),r=n("b622"),i=r("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?o(n)&&(n=n[i],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"840a":function(e,t,n){"use strict";n.r(t);var o=n("7a23");function a(e,t,n,a,r,i){var l=Object(o["M"])("GoodsTypeTree"),c=Object(o["M"])("el-aside"),u=Object(o["M"])("Goods"),d=Object(o["M"])("el-main"),s=Object(o["M"])("el-container");return Object(o["D"])(),Object(o["i"])("div",null,[Object(o["m"])(s,null,{default:Object(o["ab"])((function(){return[Object(o["m"])(c,{width:"210px"},{default:Object(o["ab"])((function(){return[Object(o["m"])(l)]})),_:1}),Object(o["m"])(d,null,{default:Object(o["ab"])((function(){return[Object(o["m"])(u)]})),_:1})]})),_:1})])}n("b0c0");var r=Object(o["eb"])("data-v-3c7b51fe");Object(o["G"])("data-v-3c7b51fe");var i={style:{"text-align":"center","margin-top":"10px"}},l=Object(o["l"])("展开"),c=Object(o["l"])("收起"),u=Object(o["m"])("i",{class:"el-icon-menu"},null,-1),d=Object(o["l"])("全部商品类型"),s=Object(o["m"])("i",{class:"el-icon-menu"},null,-1);Object(o["E"])();var f=r((function(e,t,n,a,f,b){var m=Object(o["M"])("el-radio-button"),p=Object(o["M"])("el-radio-group"),g=Object(o["M"])("el-menu-item"),O=Object(o["M"])("el-menu");return Object(o["D"])(),Object(o["i"])("div",null,[Object(o["m"])("div",i,[Object(o["m"])(p,{modelValue:e.isCollapse,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.isCollapse=t}),style:{"margin-bottom":"10px"}},{default:r((function(){return[Object(o["m"])(m,{label:!1},{default:r((function(){return[l]})),_:1}),Object(o["m"])(m,{label:!0},{default:r((function(){return[c]})),_:1})]})),_:1},8,["modelValue"])]),Object(o["m"])(O,{router:"",class:"el-menu-vertical",collapse:e.isCollapse,"default-active":e.activeIndex},{default:r((function(){return[Object(o["m"])(g,{index:"/"},{title:r((function(){return[d]})),default:r((function(){return[u]})),_:1}),(Object(o["D"])(!0),Object(o["i"])(o["b"],null,Object(o["K"])(e.treeDataList,(function(e){return Object(o["D"])(),Object(o["i"])(g,{key:e.id,index:"/goods/"+e.id},{title:r((function(){return[Object(o["l"])(Object(o["Q"])(e.name),1)]})),default:r((function(){return[s]})),_:2},1032,["index"])})),128))]})),_:1},8,["collapse","default-active"])])})),b={name:"GoodsTypeTree",data:function(){return{isCollapse:!1,activeIndex:"/",treeDataList:[]}},methods:{loadTreeData:function(){var e=this;this.$http.get("/goods-type/all").then((function(t){e.treeDataList=t}))}},created:function(){this.loadTreeData()}};n("d16f");b.render=f,b.__scopeId="data-v-3c7b51fe";var m=b,p=Object(o["eb"])("data-v-faf02132");Object(o["G"])("data-v-faf02132");var g=Object(o["l"])("添加商品"),O={class:"dialog-footer"},j=Object(o["l"])("取 消"),h=Object(o["l"])("确 定");Object(o["E"])();var y=p((function(e,t,n,a,r,i){var l=Object(o["M"])("el-button"),c=Object(o["M"])("el-button-group"),u=Object(o["M"])("el-table-column"),d=Object(o["M"])("el-table"),s=Object(o["M"])("el-pagination"),f=Object(o["M"])("el-input"),b=Object(o["M"])("el-form-item"),m=Object(o["M"])("el-option"),y=Object(o["M"])("el-select"),v=Object(o["M"])("el-form"),T=Object(o["M"])("el-dialog"),D=Object(o["N"])("loading");return Object(o["D"])(),Object(o["i"])("div",null,[Object(o["m"])(c,{style:{"margin-bottom":"10px","margin-top":"10px"}},{default:p((function(){return[Object(o["m"])(l,{onClick:t[1]||(t[1]=function(t){return e.dialogFormVisible=!0}),type:"primary",plain:"",icon:"el-icon-plus"},{default:p((function(){return[g]})),_:1})]})),_:1}),Object(o["bb"])(Object(o["m"])(d,{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)",data:e.tableDataList,style:{width:"100%"},"row-style":{height:"40px"},"cell-style":{padding:"5px 0"},stripe:"",border:"","highlight-current-row":""},{default:p((function(){return[Object(o["m"])(u,{prop:"goodsTypeName",label:"商品类型"}),Object(o["m"])(u,{prop:"name",label:"名称"}),Object(o["m"])(u,{label:"单价"},{default:p((function(e){return[Object(o["l"])(Object(o["Q"])(e.row.price)+" 元 ",1)]})),_:1}),Object(o["m"])(u,{label:"库存数量"},{default:p((function(e){return[0===e.row.amount?(Object(o["D"])(),Object(o["i"])(l,{key:0,type:"danger",round:"",size:"mini"},{default:p((function(){return[Object(o["l"])(Object(o["Q"])(e.row.amount),1)]})),_:2},1024)):e.row.amount<=10?(Object(o["D"])(),Object(o["i"])(l,{key:1,type:"warning",round:"",size:"mini"},{default:p((function(){return[Object(o["l"])(Object(o["Q"])(e.row.amount),1)]})),_:2},1024)):(Object(o["D"])(),Object(o["i"])(l,{key:2,type:"success",round:"",size:"mini"},{default:p((function(){return[Object(o["l"])(Object(o["Q"])(e.row.amount),1)]})),_:2},1024))]})),_:1}),Object(o["m"])(u,{prop:"unit",label:"单位"}),Object(o["m"])(u,{prop:"createTime",label:"创建时间",formatter:i.dateTimeFormat},null,8,["formatter"]),Object(o["m"])(u,{prop:"updateTime",label:"更新时间",formatter:i.dateTimeFormat},null,8,["formatter"]),Object(o["m"])(u,{fixed:"right",label:"操作"},{default:p((function(e){return[Object(o["m"])(l,{onClick:Object(o["db"])((function(t){return i.editRow(e.row)}),["prevent"]),type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},null,8,["onClick"]),Object(o["j"])("",!0)]})),_:1})]})),_:1},8,["data"]),[[D,e.loading]]),Object(o["m"])(s,{background:"",onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange,"current-page":e.currentPage,"page-sizes":[15,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),Object(o["m"])(T,{title:"添加/编辑商品",modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.dialogFormVisible=t})},{footer:p((function(){return[Object(o["m"])("span",O,[Object(o["m"])(l,{onClick:t[7]||(t[7]=function(e){return i.closeDialog()})},{default:p((function(){return[j]})),_:1}),Object(o["m"])(l,{type:"primary",onClick:t[8]||(t[8]=function(e){return i.addOrUpdateGoods("form")})},{default:p((function(){return[h]})),_:1})])]})),default:p((function(){return[Object(o["m"])(v,{model:e.form,rules:e.rules,ref:"form","label-width":"120px"},{default:p((function(){return[null!=e.form.id?(Object(o["D"])(),Object(o["i"])(b,{key:0,label:"商品ID",prop:"id"},{default:p((function(){return[Object(o["m"])(f,{modelValue:e.form.id,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.id=t}),disabled:!0},null,8,["modelValue"])]})),_:1})):Object(o["j"])("",!0),Object(o["m"])(b,{label:"商品类型",prop:"goodsTypeId"},{default:p((function(){return[Object(o["m"])(y,{modelValue:e.form.goodsTypeId,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.goodsTypeId=t}),key:e.form.goodsTypeId,placeholder:"请选择商品类型"},{default:p((function(){return[(Object(o["D"])(!0),Object(o["i"])(o["b"],null,Object(o["K"])(e.goodsTypeList,(function(e){return Object(o["D"])(),Object(o["i"])(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o["m"])(b,{label:"商品名称",prop:"name"},{default:p((function(){return[Object(o["m"])(f,{modelValue:e.form.name,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.name=t}),autocomplete:"off"},null,8,["modelValue"])]})),_:1}),Object(o["m"])(b,{label:"价格（￥）",prop:"price"},{default:p((function(){return[Object(o["m"])(f,{type:"number",modelValue:e.form.price,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.price=t}),autocomplete:"off"},null,8,["modelValue"])]})),_:1}),Object(o["m"])(b,{label:"单位",prop:"unit"},{default:p((function(){return[Object(o["m"])(f,{modelValue:e.form.unit,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.unit=t}),autocomplete:"off"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue"])])})),v=(n("a434"),{name:"Goods",data:function(){return{loading:!0,tableDataList:[],currentPage:1,pageSize:15,total:0,goodsTypeList:[],dialogFormVisible:!1,form:{id:null,goodsTypeId:null,name:null,unit:null,price:null},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:64,message:"名称长度必须在 1 ~ 64 之间",trigger:"blur"}],goodsTypeId:[{required:!0,message:"请选择商品类型",trigger:"change"}]}}},methods:{loadTableData:function(e,t,n){var o=this;this.$http.get("/goods",{current:e,size:t,goodsTypeId:n}).then((function(e){o.tableDataList=e.dataList,o.total=e.total,o.loading=!1}))},loadGoodsTypeData:function(){var e=this;this.$http.get("/goods-type/all").then((function(t){e.goodsTypeList=t}))},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.loadTableData(this.currentPage,this.pageSize)},handleCurrentChange:function(e){this.currentPage=e,this.loadTableData(this.currentPage,this.pageSize)},addOrUpdateGoods:function(e){var t=this,n=this;this.$refs[e].validate((function(e){if(!e)return!1;null===t.form.id?t.$http.post("/goods",t.form).then((function(){n.loadTableData(n.currentPage,n.pageSize,n.form.goodsTypeId),n.closeDialog(),n.$message({type:"success",message:"操作成功!"})})):t.$http.put("/goods",t.form).then((function(){n.closeDialog(),n.$message({type:"success",message:"操作成功!"})}))}))},closeDialog:function(){this.dialogFormVisible=!1,this.form={}},editRow:function(e){this.loadGoodsTypeData(),this.dialogFormVisible=!0,this.form=e},deleteRow:function(e,t,n){var o=this;this.$confirm("此操作将删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$http.delete("/goods/"+t.id).then((function(){n.splice(e,1),o.$message({type:"success",message:"删除成功!"})}))})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},dateTimeFormat:function(e,t){var n=e[t.property];return void 0==n?"":this.$dayjs(n).format("YYYY-MM-DD HH:mm:ss")}},created:function(){var e=this;this.loadTableData(this.currentPage,this.pageSize),this.loadGoodsTypeData();var t=this;this.$watch((function(){return e.$route.params}),(function(n,o){n!=o&&(t.form.goodsTypeId=n.goodsTypeId,t.loadTableData(e.currentPage,e.pageSize,n.goodsTypeId))}))}});v.render=y,v.__scopeId="data-v-faf02132";var T=v,D={name:"LayoutGoods",components:{GoodsTypeTree:m,Goods:T}};D.render=a;t["default"]=D},8418:function(e,t,n){"use strict";var o=n("c04e"),a=n("9bf2"),r=n("5c6c");e.exports=function(e,t,n){var i=o(t);i in e?a.f(e,i,r(0,n)):e[i]=n}},a434:function(e,t,n){"use strict";var o=n("23e7"),a=n("23cb"),r=n("a691"),i=n("50c4"),l=n("7b0b"),c=n("65f0"),u=n("8418"),d=n("1dde"),s=n("ae40"),f=d("splice"),b=s("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,p=Math.min,g=9007199254740991,O="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f||!b},{splice:function(e,t){var n,o,d,s,f,b,j=l(this),h=i(j.length),y=a(e,h),v=arguments.length;if(0===v?n=o=0:1===v?(n=0,o=h-y):(n=v-2,o=p(m(r(t),0),h-y)),h+n-o>g)throw TypeError(O);for(d=c(j,o),s=0;s<o;s++)f=y+s,f in j&&u(d,s,j[f]);if(d.length=o,n<o){for(s=y;s<h-o;s++)f=s+o,b=s+n,f in j?j[b]=j[f]:delete j[b];for(s=h;s>h-o+n;s--)delete j[s-1]}else if(n>o)for(s=h-o;s>y;s--)f=s+o-1,b=s+n-1,f in j?j[b]=j[f]:delete j[b];for(s=0;s<n;s++)j[s+y]=arguments[s+2];return j.length=h-o+n,d}})},ae40:function(e,t,n){var o=n("83ab"),a=n("d039"),r=n("5135"),i=Object.defineProperty,l={},c=function(e){throw e};e.exports=function(e,t){if(r(l,e))return l[e];t||(t={});var n=[][e],u=!!r(t,"ACCESSORS")&&t.ACCESSORS,d=r(t,0)?t[0]:c,s=r(t,1)?t[1]:void 0;return l[e]=!!n&&!a((function(){if(u&&!o)return!0;var e={length:-1};u?i(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,d,s)}))}},b0c0:function(e,t,n){var o=n("83ab"),a=n("9bf2").f,r=Function.prototype,i=r.toString,l=/^\s*function ([^ (]*)/,c="name";o&&!(c in r)&&a(r,c,{configurable:!0,get:function(){try{return i.call(this).match(l)[1]}catch(e){return""}}})},d16f:function(e,t,n){"use strict";n("04cb")},e8b5:function(e,t,n){var o=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==o(e)}}}]);
//# sourceMappingURL=chunk-e4a4f780.10428148.js.map